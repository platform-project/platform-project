<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Editor</title>
  <style type="text/css" media="screen">
    body {
        overflow: hidden;
    }
    
    #editor { 
        margin: 0;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
    }
  </style>
  <script src="alert/dist/sweetalert.min.js"></script>
  <link rel="stylesheet" href="alert/dist/sweetalert.css">
</head>
<body>

<pre id="editor">&lt;?php
/**
 * Write a new test
 * Test case: Describe the test case scenario
 *
 * @version     $Id: index.php 40 2011-02-09 14:10:00Z biyi $
 * @package     Platform
 * @category    Tests
 * @author      The Platorm Authors
 * @link        mailto:platform@entilda.com
 * @copyright   Copyright (C) 2011 The Platorm Authors. All rights reserved.
 * @license     GNU/GPL, see LICENSE.php
 * Platform is free software. This version may have been modified pursuant
 * to the GNU General Public License, and as distributed it includes or
 * is derivative of works licensed under the GNU General Public License or
 * other free or open source software licenses.
 * See COPYRIGHT.php for copyright notices and details.
 */

platform_launch_initialize();

// Start writing your code
?&gt;</pre>
    
<script src="src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="https://code.jquery.com/jquery-2.2.4.min.js" type="text/javascript"></script>
<script>
  var editor = ace.edit("editor");
  editor.setTheme("ace/theme/twilight");
  editor.getSession().setMode("ace/mode/php");
  save_file = function(){
    var contents = editor.getSession().getValue();
    confirm();
    $.post("index.php", { contents: contents }, function(){
      console.log('saving file...');      
    });
  }

  function confirm(){
    swal({ 
      title: "File saved",   
      text: "",   
      type: "success",   
      showCancelButton: false,   
      confirmButtonColor: "#DD6B55",   
      confirmButtonText: "Okay",   
      cancelButtonText: "No",   
      closeOnConfirm: false,   
      closeOnCancel: false }
    );
  }

  editor.commands.addCommand({
    name: "save",
    bindKey: {
      win: "Ctrl-S",
      mac: "Command-S",
      sender: "editor|cli"
    },
    exec: function(){
      save_file();
    }
  });
</script>
</body>
</html>
